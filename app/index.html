<!DOCTYPE html>
<html>
<head>
    <title>rasti.js demo</title>
    <meta charset=utf-8>
    <meta name=viewport content="width=device-width, initial-scale=1 maximum-scale=1">
    <link rel=manifest href=manifest.json>

    <link rel=stylesheet href=app.css>
    
    <!-- 
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker
                .register('./service-worker.js')
                .then(function() { console.log('Service Worker Registered') })
        }
        else alert('Sorry, offline functionality is not available')
    </script>
    -->

</head>

<body rasti=app hidden persist>
<!-- 
the [rasti=X] declaration does 3 things:
    1. creates a rasti instance named 'X'
    2. binds it to the container (in this case the body, but could be any div as well)
    3. creates an 'X' global var to access the instance (window.X = instance)
-->

    <nav class=mid>
        <div name=config
            toggle="menu=config"
            icon=gear></div>
        <div nav=main text=main></div>
        <div nav=about text=about></div>
        <div nav=login class="round right"></div>
    </nav>


    <div menu=config header
        class="pad pad-s-desktop">           
        <div block=buttons
            prop=lang label
            onchange=app.setLang(this.value)></div>

        <div block=radios
            prop=theme label
            on-change=applyTheme></div>

        <div block=buttons
            data=themeMaps
            label=variante
            on-change=applyTheme></div>
    </div>


    <div page=about header
        class="row hh-phone">
        <div panel class="pad-desktop">
            <h1>rasti.js demo app</h1>
            <div section>
                <ul data=features label=features class="lighten"></ul>
            </div>
        </div>
    </div>


    <div page=login header=welcome
        class="column hide-nav textc">

        <img src=rasti-192x192.png />

        <div panel class="pad">
            
            <input prop=user navparam
                icon=user
                pattern="^[a-z\d\.]{5,}$"
                required />

            <input type=password
                prop=pass
                icon=lock
                pattern="^[\d]{4,}$"
                required />

            <button class="fullw"
                text=login
                on-click=login
                validate></button>
        </div>

    </div>


    <div page=main header
        class="row tabs-tablet hh-phone">

        <div panel=filters header
            ajax=getPeople
            state
            class="col-4 scrolly hh-phone pad pad-s-desktop">

            <div section class="pad">
                <input prop=name label>
                <select prop=area label data></select>
                <div block=multi filter
                    prop=skills label
                    bind=area></div>
            </div>

            <div section=reqdata header
                class="collapsable">
                <textarea name=reqdata disabled
                    style=height:100px></textarea>
            </div>

            <button class="fullw"
                icon=search
                submit=getPeople
                render=results
                text=search></button>
        </div>


        <div panel header
            template=results paging columns
            fx=stack
            class="col-8 hh-phone" style="height: 85vh;">

            <div class="card row" section>
                <img src="img/${data.id}.jpg" onerror=app.methods.imgFallback(this) />
                <div class="data">
                    <div class="name">${data.name}</div>
                    <div class="row">
                        <div class="labels col-4">
                            Area:<br/>
                            Position:<br/>
                            Skills:<br/>
                        </div>
                        <div class="values col-8">
                            ${data.area}<br/>
                            ${data.position}<br/>
                            ${data.skills}<br/>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>


    <script src=../../rasti.js/dist/rasti+zepto.js></script>
    <!-- <script src=https://rawgit.com/kareraisu/rasti.js/dev/dist/rasti%2Bzepto.min.js></script> -->

    <script src=extra/backend.js></script>
    <script src=extra/config.js></script>
    <script src=app.js></script>

</body>
</html>