<!DOCTYPE html>
<html>
<head>
    <title>rasti.js demo</title>
    <meta charset=utf-8>
    <meta name=viewport content="width=device-width, initial-scale=1 maximum-scale=1">
    <link rel=manifest href=manifest.json>

    <link rel=stylesheet href=app.css>
    
    <!-- 
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker
                .register('./service-worker.js')
                .then(function() { console.log('Service Worker Registered') })
        }
        else alert('Sorry, offline functionality is not available')
    </script>
    -->

</head>

<body rasti=app hidden>
<!-- 
the [rasti=X] declaration does 3 things:
    1. creates a rasti instance named 'X'
    2. binds it to the container (in this case the body, but could be any div as well)
    3. creates an 'X' global var to access the instance (window.X = instance)
-->

    <nav bg=mid>
        <div nav=main text=main></div>
        <div nav=about text=about></div>
        <div template bind=user class="right"
            toggle="menu=user">
            <label class="hide-phone">${ props.user }</label>
            <img src="img/${ app.props.user }.jpg" class="round" style="height: 50px; width: 50px; margin-left: 10px;" />
        </div>
    </nav>

    
    <div menu=user bg=mid class="right" style="width: 200px;">
        <div text=config icon=gear toggle="prop=config" ></div>
        <div text=logout icon=exit nav=login ></div>
    </div>


    <div menu prop=config bg=mid
        class="right inline-label_" style="width: 250px;">           
        <div block=buttons
            prop=lang label
            onchange=app.setLang(this.value)></div>

        <div block=radios
            prop=theme label
            on-change=applyTheme></div>

        <div block=buttons
            prop=variant label
            data=themeMaps
            on-change=applyTheme></div>
    </div>


    <div page=about header
        class="row hh-phone">
        <div panel class="pad-desktop">
            <h1>rasti.js demo app</h1>
            <div section>
                <ul data=features label=features bg=lighten ></ul>
            </div>
        </div>
    </div>


    <div page=login header=welcome
        class="hide-nav">

        <div panel ajax=login
            class="center textc" bg=transparent
            style="max-width: 400px; max-height: 500px" >
            
            <img src=rasti-192x192.png style="margin: 25px 0;"/>

            <input prop=user navparam
                icon=user
                pattern="^[a-z\d\.]{5,}$"
                required />

            <input type=password
                transient prop=pass
                icon=lock
                pattern="^[\d]{8,}$"
                maxlength=16
                required
                onfocus="this.oninput(); test.style.opacity = 1"
                onblur="test.style.opacity = 0"
                oninput="test.value = this.value.length"/>
                
            <meter id=test min="0" max="16" value="0"
                low="5" high="10" optimum="16"
                class="fullw" style="opacity: 0; transition: opacity .5s;"></meter>

            <button class="fullw"
                text=login
                submit=login
                validate></button>

            <div class="error" text=error_login style="display: none; color: #bbb"></div>

        </div>

    </div>


    <div page=main header
        class="row tabs-tablet hh-phone">

        <div panel prop=filters header
            ajax=getPeople
            class="col-4 scrolly hh-phone pad pad-s-desktop">

            <div section class="pad">
                <input prop=name label>
                <select prop=area label data></select>
                <div block=multi filter
                    prop=skills label
                    bind=area></div>
            </div>

            <div foldable section=reqdata header>
                <textarea private transient prop=reqdata disabled
                    style=height:100px></textarea>
            </div>

            <button class="fullw"
                icon=search
                submit=getPeople
                render=results
                text=search></button>
        </div>


        <div panel header
            paged template=results columns
            fx=stack
            class="col-8 hh-phone" style="height: 85vh;">

            <div class="card row" section>
                <img src="img/${ data.id }.jpg"
                    onerror=app.methods.imgFallback(this) />
                <div class="data">
                    <div class="name">${ data.name }</div>
                    <div class="row">
                        <div class="labels col-4">
                            Area:<br/>
                            Position:<br/>
                            Skills:<br/>
                        </div>
                        <div class="values col-8">
                            ${ data.area }<br/>
                            ${ data.position }<br/>
                            ${ data.skills }<br/>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>


    <script src=../../rasti.js/dist/rasti+zepto.js></script>
    <!-- <script src=https://rawgit.com/kareraisu/rasti.js/dev/dist/rasti%2Bzepto.min.js></script> -->

    <script src=extra/backend.js></script>
    <script src=extra/config.js></script>
    <script src=app.js></script>

</body>
</html>